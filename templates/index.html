<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check-in | Computer Lab</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='user_style.css') }}">
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <section class="user-container">
        <div class="login-card">
            
            <div class="text-center mb-4">
                <div class="mb-2"> 
                    <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" class="logo-img" onerror="this.style.display='none'">
                </div>
                <h2 class="page-title">‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á Lab</h2>
            </div>
            
            <div class="login-card-content mt-4">
                
                <!-- Tab ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà QR/Manual ‡πÄ‡∏î‡∏¥‡∏°) -->
                <div class="tab-container">
                    <button type="button" onclick="selectUserType('staff')" id="btnStaff" class="tab-btn active">
                        üè¢ ‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£ / ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
                    </button>
                    <button type="button" onclick="selectUserType('guest')" id="btnGuest" class="tab-btn">
                        üë§ ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
                    </button>
                </div>

                <div id="viewManual">
                    <form id="checkinForm" onsubmit="handleCheckIn(event)">
                        
                        <div class="mb-4">
                            <input type="text" id="studentId" class="input-field" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ / ‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£" autocomplete="off" autofocus style="letter-spacing: 0;">
                        </div>

                        <!-- ‡∏ã‡πà‡∏≠‡∏ô Radio Group ‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ script.js ‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (Logic ‡πÄ‡∏î‡∏¥‡∏°) -->
                        <div class="hidden">
                            <input type="radio" name="userCategory" id="radioStaff" value="staff" checked>
                            <input type="radio" name="userCategory" id="radioGuest" value="guest">
                        </div>

                        <!-- 1. ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ (‡∏ô‡∏≥‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠) -->
                        <div class="mb-4">
                            <label class="form-label">1. ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ</label>
                            <div class="radio-group">
                                <label class="selection-card bg-gray">
                                    <input type="radio" name="accessType" value="booking" checked>
                                    <span>üìÖ ‡∏à‡∏≠‡∏á‡∏°‡∏≤</span>
                                </label>
                                <label class="selection-card bg-gray">
                                    <input type="radio" name="accessType" value="walkin">
                                    <span>üö∂ Walk-in</span>
                                </label>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label">2. ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå</label>
                            <div class="radio-group">
                                <label class="selection-card usage-computer">
                                    <input type="radio" name="usageType" value="computer" checked onchange="toggleAiSelect(false)">
                                    <span>üíª ‡∏Ñ‡∏≠‡∏°‡∏Ø ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</span>
                                </label>
                                <label class="selection-card usage-ai">
                                    <input type="radio" name="usageType" value="ai" onchange="toggleAiSelect(true)">
                                    <span>ü§ñ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI</span>
                                </label>
                            </div>
                            
                            <!-- Dropdown ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å AI -->
                            <div id="aiSelection" class="mt-2 hidden" style="animation: fadeIn 0.3s;">
                                <select id="aiTool" class="input-field" style="padding: 10px; font-size: 0.9rem; margin-top: 5px;">
                                    <option value="ChatGPT">üü¢ ChatGPT</option>
                                    <option value="Gemini">üîµ Google Gemini</option>
                                    <option value="Midjourney">üé® Midjourney</option>
                                    <option value="Copilot">üíª GitHub Copilot</option>
                                    <option value="Other">‚ö™ ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary w-full" style="padding: 14px; font-size: 16px;">
                            LOGIN
                        </button>
                    </form>
                </div>

            </div>
        </div>
    </section>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <div class="icon-circle">
                <span class="success-icon">‚úì</span>
            </div>
            <h3 class="font-bold text-main" style="font-size: 20px; margin-bottom: 5px;">Check-in ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h3>
            
            <div class="bg-gray" style="padding: 15px; border-radius: 10px; margin: 20px 0;">
                <p id="modalUserName" class="font-bold" style="color: var(--primary); font-size: 1.1rem; margin-bottom: 5px;">Loading...</p>
                <p id="modalUserTime" class="text-light text-sm">Loading...</p>
            </div>
            
            <button onclick="closeModal()" class="btn btn-primary w-full justify-center">‡∏ï‡∏Å‡∏•‡∏á</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        function toggleAiSelect(show) {
            const el = document.getElementById('aiSelection');
            if(show) el.classList.remove('hidden');
            else el.classList.add('hidden');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Tab ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤ Radio ‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà)
        function selectUserType(type) {
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏•‡∏≤‡∏™‡∏õ‡∏∏‡πà‡∏°
            document.getElementById('btnStaff').classList.remove('active');
            document.getElementById('btnGuest').classList.remove('active');
            
            if (type === 'staff') {
                // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£
                document.getElementById('btnStaff').classList.add('active');
                document.getElementById('radioStaff').checked = true;
                document.getElementById('studentId').placeholder = "‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ / ‡∏£‡∏´‡∏±‡∏™‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£";
            } else {
                // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
                document.getElementById('btnGuest').classList.add('active');
                document.getElementById('radioGuest').checked = true;
                document.getElementById('studentId').placeholder = "‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏• / ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå";
            }
            
            // Focus ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å
            document.getElementById('studentId').focus();
        }
    </script>
</body>
</html>